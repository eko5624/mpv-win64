# Maintainer: nyfair <nyfair2012@gmail.com>
pkgname=aria2
pkgver=1.36.0
pkgrel=1
pkgdesc='Download utility that supports HTTP(S), FTP, BitTorrent, and Metalink'
arch=('x86_64')
url='http://aria2.sourceforge.net/'
license=('GPL2')
source=("https://github.com/aria2/aria2/archive/refs/heads/master.zip")
md5sums=('SKIP')

build() {
  cd $srcdir/aria2-master
  autoreconf -i
  patch -p1 -i ../../aria2.patch
  ./configure \
    --host=x86_64-w64-mingw32 \
    --without-included-gettext \
    --disable-nls \
    --with-wintls \
    --with-libz \
    --without-libgmp \
    --without-libgcrypt \
    --without-libnettle \
    --disable-bittorrent \
    --disable-metalink \
    ARIA2_STATIC=yes
  make
}

package() {
  depends=('mcfgthread')
  export PKGEXT='.pkg.tar.xz'
  cd $srcdir/aria2-master
  mkdir -p $pkgdir/opt/bin
  mv src/aria2c.exe $pkgdir/opt/bin
}
